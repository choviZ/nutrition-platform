# 营养搭配服务平台需求分析文档

## 1. 项目概述

### 1.1 项目背景
随着人们健康意识的提升，个性化营养搭配需求日益增长。传统的饮食指导方式缺乏个性化和科学性，难以满足不同用户的特定营养需求。本项目旨在构建一个基于Spring Boot的营养搭配服务平台，通过科学的营养评估算法和个性化推荐机制，为用户提供定制化的饮食解决方案。

### 1.2 项目目标
- **主要目标**：构建个性化、科学的营养搭配服务平台
- **核心价值**：帮助用户实现健康饮食，优化饮食习惯，确保营养均衡
- **服务对象**：有健康饮食需求的个人用户
- **预期效果**：提供实时营养评估、个性化饮食方案生成、饮食跟踪和数据分析功能

### 1.3 系统定位
本系统定位为B2C营养健康服务平台，采用前后端分离架构，为用户提供Web端营养搭配服务。系统具备高可扩展性和可维护性，支持未来功能模块的扩展。

## 2. 功能需求分析

### 2.1 用户信息管理模块

#### 2.1.1 功能描述
管理用户基本信息和健康档案，为营养评估和方案制定提供数据基础。

#### 2.1.2 具体需求

**FR-001 用户注册与登录**
- 用户可通过邮箱/手机号注册账户
- 支持用户名密码登录
- 实现JWT token认证机制
- 支持密码重置功能

**FR-002 用户基本信息管理**
- 用户可录入和修改个人基本信息：
  - 用户编号（系统自动生成）
  - 姓名
  - 性别
  - 年龄
  - 身高（cm）
  - 体重（kg）
  - 健康目标（减肥/增肌/维持健康）
- 支持信息的增删改查操作
- 提供数据验证和格式校验

**FR-003 用户健康档案管理**
- 记录用户健康状况信息：
  - 慢性疾病史
  - 过敏史
  - 饮食偏好
  - 忌口食物
  - 运动习惯
- 支持健康档案的更新和查询
- 为个性化方案制定提供参考依据

**FR-004 批量数据操作**
- 支持用户信息的批量导入（Excel格式）
- 支持用户信息的批量导出
- 提供数据模板下载功能

### 2.2 营养需求评估模块

#### 2.2.1 功能描述
基于用户基本信息和活动水平，科学计算用户的营养需求，为饮食方案制定提供量化依据。

#### 2.2.2 具体需求

**FR-005 营养需求计算**
- 基于用户输入信息计算营养需求：
  - 年龄、性别、体重、身高
  - 活动水平（久坐/轻度活动/中度活动/重度活动）
  - 健康目标
- 计算结果包括：
  - 每日热量需求（kcal）
  - 蛋白质需求（g）
  - 碳水化合物需求（g）
  - 脂肪需求（g）
  - 维生素和矿物质需求

**FR-006 评估结果管理**
- 保存评估结果到数据库
- 记录评估日期和版本
- 支持历史评估结果查询
- 提供评估结果对比功能

**FR-007 评估结果查询**
- 支持按用户查询营养需求
- 支持按评估日期范围查询
- 提供评估结果统计分析
- 支持评估报告导出

### 2.3 饮食方案制定模块

#### 2.3.1 功能描述
基于营养需求评估结果和营养数据库，自动生成个性化的饮食方案，并支持用户自定义调整。

#### 2.3.2 具体需求

**FR-008 个性化方案生成**
- 基于营养需求评估结果生成饮食方案
- 结合用户饮食偏好和忌口信息
- 方案包含：
  - 早餐搭配
  - 午餐搭配
  - 晚餐搭配
  - 加餐建议
- 每项搭配包含食物名称、分量、营养成分

**FR-009 营养数据库管理**
- 维护食物营养成分数据库
- 包含食物基本信息：
  - 食物名称
  - 食物分类
  - 每100g营养成分（热量、蛋白质、碳水、脂肪等）
  - 维生素和矿物质含量
- 支持营养数据的增删改查

**FR-010 方案查看与调整**
- 用户可查看生成的饮食方案
- 支持方案的手动调整：
  - 替换食物
  - 调整分量
  - 添加/删除食物
- 实时显示调整后的营养成分变化
- 提供营养达标度提示

**FR-011 方案保存与管理**
- 保存用户确认的饮食方案
- 支持方案的复制和模板化
- 提供方案历史记录查询
- 支持方案分享功能

### 2.4 饮食记录管理模块

#### 2.4.1 功能描述
记录用户实际饮食情况，跟踪营养摄入，为饮食调整提供数据支持。

#### 2.4.2 具体需求

**FR-012 饮食记录录入**
- 用户可实时记录饮食情况：
  - 记录日期
  - 餐别（早餐/午餐/晚餐/加餐）
  - 食物名称
  - 食物分量
- 支持快速录入常用食物
- 提供食物搜索和选择功能
- 支持拍照记录功能

**FR-013 饮食记录管理**
- 支持饮食记录的增删改查
- 提供记录的批量操作功能
- 支持记录的导入导出
- 提供记录模板功能

**FR-014 饮食记录查询**
- 支持按用户查询饮食记录
- 支持按日期范围查询
- 支持按餐别筛选
- 支持按食物类型筛选

**FR-015 饮食记录分析**
- 自动计算每日营养摄入量
- 对比计划营养需求与实际摄入
- 生成营养摄入趋势图表
- 提供饮食建议和改进方案

## 3. 非功能需求分析

### 3.1 性能需求

**NFR-001 响应时间要求**
- 页面加载时间：≤ 3秒
- 数据查询响应时间：≤ 2秒
- 方案生成时间：≤ 5秒
- 文件上传处理时间：≤ 10秒

**NFR-002 并发性能要求**
- 支持100个并发用户同时在线
- 数据库连接池最大连接数：50
- 系统可用性：99.5%

**NFR-003 数据存储要求**
- 支持10万用户数据存储
- 单用户数据存储上限：100MB
- 数据备份频率：每日一次

### 3.2 安全需求

**NFR-004 身份认证与授权**
- 采用JWT token认证机制
- Token有效期：24小时
- 支持token刷新机制
- 实现基于角色的访问控制

**NFR-005 数据安全**
- 用户密码采用BCrypt加密存储
- 敏感数据传输采用HTTPS协议
- 实现SQL注入防护
- 实现XSS攻击防护

**NFR-006 隐私保护**
- 用户个人信息加密存储
- 实现数据脱敏功能
- 支持用户数据删除请求
- 遵循数据保护相关法规

## 4. 系统架构与技术约束

### 4.1 技术架构

**架构模式**
- 采用分层架构设计
- 表现层：前端页面（Vue.js + Element UI）
- 业务逻辑层：后端服务（Spring Boot）
- 数据访问层：数据库操作（Mybatis Plus）
- 数据存储层：MySQL数据库

**API设计**

- 实现前后端分离架构
- 统一的API响应格式
- 完善的API文档（Swagger）

### 4.2 技术选型约束

**后端技术栈**
- 开发框架：Spring Boot 2.x
- 数据访问：Mybatis PLUS
- 安全框架：Spring Security + JWT
- 数据库：MySQL 8.0+
- 缓存：Redis（可选）
- 构建工具：Maven

**前端技术栈**

- 开发框架：Vue.js 3.x
- UI组件库：Element Plus
- 构建工具：Vite
- 状态管理：Vuex/Pinia
- HTTP客户端：Axios

**开发环境约束**
- JDK版本：JDK 11+
- Node.js版本：16.x+
- 开发工具：IntelliJ IDEA / VS Code
- 版本控制：Git

## 5. 数据模型设计

### 5.1 核心实体

**用户实体（User）**
```
- userId: Long (主键，用户编号)
- username: String (用户名)
- password: String (密码，加密存储)
- email: String (邮箱)
- phone: String (手机号)
- realName: String (真实姓名)
- gender: Integer (性别：0-女，1-男)
- age: Integer (年龄)
- height: Double (身高，cm)
- weight: Double (体重，kg)
- healthGoal: Integer (健康目标：1-减肥，2-增肌，3-维持健康)
- createTime: DateTime (创建时间)
- updateTime: DateTime (更新时间)
- status: Integer (状态：0-禁用，1-启用)
```

**用户健康档案实体（UserHealthProfile）**
```
- profileId: Long (主键)
- userId: Long (外键，关联用户)
- chronicDiseases: String (慢性疾病史)
- allergies: String (过敏史)
- dietaryPreferences: String (饮食偏好)
- forbiddenFoods: String (忌口食物)
- exerciseHabits: String (运动习惯)
- activityLevel: Integer (活动水平：1-久坐，2-轻度，3-中度，4-重度)
- createTime: DateTime (创建时间)
- updateTime: DateTime (更新时间)
```

**营养需求实体（NutritionRequirement）**
```
- requirementId: Long (主键)
- userId: Long (外键，关联用户)
- assessmentDate: Date (评估日期)
- dailyCalories: Double (每日热量需求，kcal)
- protein: Double (蛋白质需求，g)
- carbohydrate: Double (碳水化合物需求，g)
- fat: Double (脂肪需求，g)
- fiber: Double (膳食纤维需求，g)
- vitaminA: Double (维生素A需求，μg)
- vitaminC: Double (维生素C需求，mg)
- calcium: Double (钙需求，mg)
- iron: Double (铁需求，mg)
- createTime: DateTime (创建时间)
```

**饮食方案实体（DietPlan）**
```
- planId: Long (主键)
- userId: Long (外键，关联用户)
- planDate: Date (方案日期)
- planName: String (方案名称)
- breakfast: Text (早餐内容，JSON格式)
- lunch: Text (午餐内容，JSON格式)
- dinner: Text (晚餐内容，JSON格式)
- snacks: Text (加餐内容，JSON格式)
- totalCalories: Double (总热量)
- totalProtein: Double (总蛋白质)
- totalCarbohydrate: Double (总碳水化合物)
- totalFat: Double (总脂肪)
- status: Integer (状态：1-草稿，2-已确认，3-已执行)
- createTime: DateTime (创建时间)
- updateTime: DateTime (更新时间)
```

**饮食记录实体（DietRecord）**
```
- recordId: Long (主键)
- userId: Long (外键，关联用户)
- recordDate: Date (记录日期)
- mealType: Integer (餐别：1-早餐，2-午餐，3-晚餐，4-加餐)
- foodName: String (食物名称)
- foodAmount: Double (食物分量，g)
- calories: Double (热量，kcal)
- protein: Double (蛋白质，g)
- carbohydrate: Double (碳水化合物，g)
- fat: Double (脂肪，g)
- createTime: DateTime (创建时间)
- updateTime: DateTime (更新时间)
```

**食物营养数据实体（FoodNutrition）**
```
- foodId: Long (主键)
- foodName: String (食物名称)
- foodCategory: String (食物分类)
- caloriesPer100g: Double (每100g热量，kcal)
- proteinPer100g: Double (每100g蛋白质，g)
- carbohydratePer100g: Double (每100g碳水化合物，g)
- fatPer100g: Double (每100g脂肪，g)
- fiberPer100g: Double (每100g膳食纤维，g)
- vitaminAPer100g: Double (每100g维生素A，μg)
- vitaminCPer100g: Double (每100g维生素C，mg)
- calciumPer100g: Double (每100g钙，mg)
- ironPer100g: Double (每100g铁，mg)
- createTime: DateTime (创建时间)
- updateTime: DateTime (更新时间)
```

### 5.2 数据关系

- 用户与用户健康档案：一对一关系
- 用户与营养需求：一对多关系
- 用户与饮食方案：一对多关系
- 用户与饮食记录：一对多关系
- 饮食记录与食物营养数据：多对一关系

## 6. 接口规范

### 6.1 API设计原则

- 采用RPC风格设计，面向功能操作
- 统一的URL命名规范，使用动词描述操作
- 统一使用POST方法进行数据传输
- 统一的响应数据格式
- 完善的错误处理机制

### 6.2 通用响应格式

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {},
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### 6.3 核心API接口

**用户管理接口**
- POST /api/user/register - 用户注册
- POST /api/user/login - 用户登录
- GET /api/user/logout - 用户登出
- GET /api/user/getUserInfo - 获取用户信息
- POST /api/user/updateUserInfo - 更新用户信息
- POST /api/user/createHealthProfile - 创建健康档案
- POST /api/user/updateHealthProfile - 更新健康档案
- GET /api/user/getHealthProfile - 获取健康档案
- POST /api/user/changePassword - 修改密码
- POST /api/user/resetPassword - 重置密码

**营养需求接口**
- POST /api/nutrition/calculateRequirement - 计算营养需求
- POST /api/nutrition/saveRequirement - 保存营养需求
- GET /api/nutrition/getRequirementByUser - 获取用户营养需求
- GET /api/nutrition/getRequirementHistory - 获取营养需求历史
- POST /api/nutrition/compareRequirements - 对比营养需求
- GET /api/nutrition/exportRequirementReport - 导出营养需求报告

**饮食方案接口**
- POST /api/dietPlan/generatePlan - 生成饮食方案
- POST /api/dietPlan/savePlan - 保存饮食方案
- GET /api/dietPlan/getPlanDetail - 获取饮食方案详情
- POST /api/dietPlan/updatePlan - 更新饮食方案
- POST /api/dietPlan/deletePlan - 删除饮食方案
- POST /api/dietPlan/getPlanList - 获取饮食方案列表
- POST /api/dietPlan/copyPlan - 复制饮食方案
- GET /api/dietPlan/sharePlan - 分享饮食方案
- POST /api/dietPlan/adjustPlanFood - 调整方案食物
- POST /api/dietPlan/calculatePlanNutrition - 计算方案营养成分

**饮食记录接口**
- POST /api/dietRecord/addRecord - 添加饮食记录
- POST /api/dietRecord/updateRecord - 更新饮食记录
- POST /api/dietRecord/deleteRecord - 删除饮食记录
- GET /api/dietRecord/getRecordDetail - 获取饮食记录详情
- GET /api/dietRecord/getRecordList - 获取饮食记录列表
- POST /api/dietRecord/getRecordByDate - 按日期获取饮食记录
- POST /api/dietRecord/analyzeNutrition - 分析营养摄入
- POST /api/dietRecord/generateReport - 生成饮食报告
- POST /api/dietRecord/batchAddRecord - 批量添加饮食记录

**食物数据接口**
- POST /api/food/getFoodList - 获取食物列表
- POST /api/food/getFoodDetail - 获取食物详情
- GET /api/food/searchFood - 搜索食物
- POST /api/food/getFoodByCategory - 按分类获取食物
- POST /api/food/addFood - 添加食物（管理员）
- POST /api/food/updateFood - 更新食物信息（管理员）
- POST /api/food/deleteFood - 删除食物（管理员）

**数据管理接口**
- POST /api/data/exportUserData - 导出用户数据
- POST /api/data/importUserData - 导入用户数据
- POST /api/data/backupData - 备份数据（管理员）
- POST /api/data/getStatistics - 获取统计数据（管理员）

## 7. 项目实施计划

### 7.1 项目基本信息

**开发周期**：1个月（4周）
**团队规模**：4人
**开发模式**：敏捷开发，每周一个迭代
**工作安排**：每周5个工作日，每日8小时

### 7.2 团队分工

**角色1：项目负责人 + 后端架构师（1人）**
- 负责项目整体规划和进度管控
- 负责后端架构设计和核心模块开发
- 负责数据库设计和优化
- 负责代码审查和技术决策
- 主要开发模块：用户管理、营养需求评估

**角色2：后端开发工程师（1人）**
- 负责后端业务逻辑开发
- 负责API接口开发和测试
- 负责数据库操作和优化
- 协助系统集成和部署
- 主要开发模块：饮食方案制定、饮食记录管理

**角色3：前端开发工程师（1人）**
- 负责前端页面设计和开发
- 负责用户界面交互实现
- 负责前后端接口对接
- 负责前端性能优化
- 主要开发模块：所有前端页面和组件

**角色4：测试工程师 + 运维工程师（1人）**
- 负责测试用例设计和执行
- 负责系统测试和性能测试
- 负责部署环境搭建
- 负责文档编写和整理
- 主要工作：测试、部署、文档

### 7.3 开发阶段划分

**第一周：基础框架搭建**

*项目负责人 + 后端架构师：*
- 项目环境搭建和配置
- 数据库设计和创建
- Spring Boot框架搭建
- 用户认证模块开发（JWT + Spring Security）

*后端开发工程师：*
- 协助环境搭建
- 学习项目架构和规范
- 开发通用工具类和配置
- 食物营养数据库初始化

*前端开发工程师：*
- 前端开发环境搭建
- Vue.js项目初始化
- UI组件库集成（Element Plus）
- 基础页面框架搭建

*测试工程师 + 运维工程师：*
- 测试环境搭建
- 测试计划制定
- 部署脚本准备
- 项目文档模板创建

**第二周：核心功能开发**

*项目负责人 + 后端架构师：*
- 用户信息管理API开发
- 用户健康档案管理
- 营养需求评估算法实现
- 营养需求计算API开发

*后端开发工程师：*
- 饮食方案生成算法开发
- 饮食方案管理API开发
- 食物数据管理API开发
- 数据库操作优化

*前端开发工程师：*
- 用户注册登录页面
- 用户信息管理页面
- 健康档案录入页面
- 营养需求评估页面

*测试工程师 + 运维工程师：*
- 接口测试用例编写
- 单元测试执行
- 数据库测试
- 持续集成环境搭建

**第三周：扩展功能开发**

*项目负责人 + 后端架构师：*
- 营养需求历史管理
- 数据分析功能开发
- 系统性能优化
- 安全机制完善

*后端开发工程师：*
- 饮食记录管理API开发
- 饮食分析功能实现
- 数据导入导出功能
- 批量操作接口开发

*前端开发工程师：*
- 饮食方案制定页面
- 饮食记录管理页面
- 数据分析图表页面
- 用户界面优化

*测试工程师 + 运维工程师：*
- 功能测试执行
- 集成测试
- 性能测试
- 部署流程测试

**第四周：测试与部署**

*项目负责人 + 后端架构师：*
- 代码审查和优化
- 系统安全检查
- 性能调优
- 技术文档编写

*后端开发工程师：*
- Bug修复和优化
- 接口文档完善
- 数据库优化
- 系统监控配置

*前端开发工程师：*
- 前端Bug修复
- 用户体验优化
- 浏览器兼容性测试
- 前端性能优化

*测试工程师 + 运维工程师：*
- 系统全面测试
- 用户验收测试
- 生产环境部署
- 运维文档编写

### 7.4 里程碑节点

**里程碑1（第1周末）：基础框架完成**
- 开发环境搭建完成
- 数据库设计完成
- 基础框架搭建完成
- 用户认证功能完成

**里程碑2（第2周末）：核心功能完成**
- 用户管理功能完成
- 营养需求评估功能完成
- 饮食方案生成功能完成
- 基础前端页面完成

**里程碑3（第3周末）：功能开发完成**
- 饮食记录管理功能完成
- 数据分析功能完成
- 前端界面完善
- 系统集成测试通过

**里程碑4（第4周末）：项目交付**
- 系统测试完成
- 生产环境部署完成
- 用户验收通过
- 项目文档交付

### 7.5 风险控制

**技术风险**
- 营养计算算法复杂度控制
- 数据库性能优化
- 前后端接口对接问题

**进度风险**
- 功能需求变更
- 技术难点攻克时间
- 团队成员技能差异

**质量风险**
- 测试覆盖率不足
- 用户体验问题
- 系统稳定性问题

**应对措施**
- 每日站会跟踪进度
- 技术难点提前攻关
- 增加代码审查频次
- 建立完善的测试体系

### 7.6 交付物清单

**代码交付物**
- 后端源代码（Spring Boot项目）
- 前端源代码（Vue.js项目）
- 数据库脚本（建表、初始数据）
- 部署脚本和配置文件

**文档交付物**
- 需求分析文档
- 系统设计文档
- 接口文档（Swagger）
- 用户操作手册
- 运维部署文档
- 测试报告

**环境交付物**
- 开发环境
- 测试环境
- 生产环境
- 持续集成环境

---

**文档版本**：V1.0  
**编写日期**：2025年9月17日  
**编写人员**：Claude4  
**审核状态**：已审核